# Setup Admin User for Login

You have an admin user seeded in MongoDB but need to complete the setup to be able to login.

## Option 1: Use the Setup Script (Recommended)

This script will update your user with all required fields and generate proper tokens.

### Steps:

1. **Install dependencies** (if not already installed):
   ```bash
   npm install
   ```

2. **Update the script** (`scripts/setup-admin-user.js`) with your values:
   - `NEW_PASSWORD`: Your desired password (default: 'admin123')
   - `FIRST_NAME`: First name (default: 'Super')
   - `LAST_NAME`: Last name (default: 'Admin')
   - `NATIONAL_ID`: National ID (default: '1234567890')
   - `MOBILE`: Mobile number (default: '09123456789')

3. **Make sure you have a `.env` file** with:
   ```
   MONGO_URI=your_mongodb_connection_string
   JWT_SECRET=your_jwt_secret_key
   ```

4. **Run the script**:
   ```bash
   node scripts/setup-admin-user.js
   ```

5. **Login** at `/auth/admin/login` with:
   - Username: `salarsafayi@gmail.com`
   - Password: (the password you set in the script)

---

## Option 2: Manual MongoDB Update

If you prefer to update directly in MongoDB:

### Step 1: Generate Password Hash

Run this to generate a password hash:
```bash
node scripts/generate-hash.mjs
```

Or if dependencies aren't installed, use this online tool:
- Go to: https://bcrypt-generator.com/
- Enter password: `admin123` (or your desired password)
- Rounds: `12`
- Copy the generated hash

### Step 2: Update User in MongoDB

Run these commands in MongoDB shell:

```javascript
// Update the user with required fields
db.users.updateOne(
  { email: "salarsafayi@gmail.com" },
  {
    $set: {
      firstName: "Super",
      lastName: "Admin",
      nationalId: "1234567890",  // Update with your actual national ID
      mobile: "09123456789",      // Update with your actual mobile number
      password: "PASTE_YOUR_HASH_HERE",  // Paste the hash from Step 1
      username: "salarsafayi@gmail.com",
      status: "active",
      role: "admin"
    }
  }
)
```

### Step 3: Generate JWT Tokens

The tokens need to be generated by the application. You have two options:

**Option A:** Use the setup script (Option 1) which generates tokens automatically.

**Option B:** Temporarily modify the login route to accept your existing tokens, or login once and the tokens will be updated.

---

## Quick Test

After setup, try logging in:
- Go to: `http://localhost:7007/auth/admin/login`
- Username: `salarsafayi@gmail.com`
- Password: (the password you set)

---

## Troubleshooting

- **"User not found"**: Make sure the email matches exactly
- **"Password incorrect"**: Double-check the password hash was copied correctly
- **"Missing required fields"**: Make sure all fields (firstName, lastName, nationalId, mobile) are set
- **Token issues**: Run the setup script which generates proper JWT tokens

